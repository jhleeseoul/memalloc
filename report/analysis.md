# 사용자 정의 메모리 할당기 성능 분석 보고서

## 1. 실험 개요

이 보고서는 C 언어로 구현한 사용자 정의 메모리 할당기에 대해 세 가지 할당 정책(first-fit, best-fit, next-fit)의 성능을 비교 분석한 결과를 담고 있다. 각 정책은 다음의 세 가지 지표에 따라 평가되었다:

- **평균 할당 시간** (Average Allocation Time)
- **외부 단편화 비율** (External Fragmentation)
- **힙 사용률** (Heap Utilization)

실험은 총 5000회의 다양한 크기의 메모리 블록 할당 및 일부 해제를 포함하는 랜덤 워크로드 환경에서 진행되었다.

## 2. 실험 환경 및 워크로드 설명

- **힙 크기:** 1MB (1048576 bytes)
- **워크로드:**
  - 무작위 크기(32 ~ 159 bytes)의 블록 5000개 할당
  - 일부 블록 해제를 통해 단편화 유도 (3개 중 1개만 해제)
- **측정 항목:**
  - `clock()`을 사용한 평균 할당 시간 측정
  - 단편화: 최대 free block / 전체 free space
  - 힙 사용률: 사용 중 블록 합계 / 전체 heap 크기

## 3. 실험 결과 요약

| 정책       | 평균 할당 시간 (s) | 외부 단편화 (%) | 힙 사용률 (%) |
|------------|--------------------|------------------|----------------|
| First Fit  | 0.00002656         | 26.65%           | 30.77%         |
| Best Fit   | 0.00002617         | **25.98%**       | 30.63%         |
| Next Fit   | **0.00001730**     | 26.99%           | 30.67%         |

## 4. 분석 및 고찰

- **속도:** Next Fit이 가장 빠르게 평균 할당 시간을 보였음. 이는 검색을 이전 위치 이후부터 시작하므로 순회 비용이 낮기 때문임.
- **단편화:** Best Fit은 단편화를 가장 잘 억제함. 작은 블록을 우선적으로 채우는 방식이 효율적임을 보여줌.
- **힙 사용률:** 세 정책 모두 유사한 수준의 사용률을 보였지만, First Fit이 근소하게 가장 높음.

### 🟢 First Fit
- 빠르고 균형 잡힌 결과
- 단편화는 중간, 속도도 중간

### 🟢 Best Fit
- 단편화 최소화에 탁월
- 하지만 검색 비용이 높아 평균 시간은 가장 느림

### 🟢 Next Fit
- 속도는 최고
- 그러나 단편화가 미세하게 더 심함

## 5. 결론

- 특정 시나리오에서는 **Next Fit**이 가장 적합할 수 있음 (실시간성 요구되는 환경)
- 메모리 효율이 중요할 경우에는 **Best Fit**을 고려할 만함
- 전체적으로는 **First Fit**이 속도와 효율 면에서 균형 잡힌 전략으로 판단됨

이번 실험을 통해 정책별 트레이드오프가 뚜렷하게 나타남을 확인하였으며, 워크로드 특성에 따라 유동적으로 정책을 선택하는 것이 중요하다는 결론을 도출할 수 있었다.
